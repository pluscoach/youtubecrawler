# YouTube Analyzer 프로젝트 개선 기록

## 프로젝트 개요
- **목적**: 유튜브 영상을 분석해서 자동매매 관련 콘텐츠 제작에 활용
- **핵심 철학**: 거장의 전략은 틀리지 않았다. 문제는 실행이다. 감정을 배제할 방법이 필요하다.

---

## 1. 구조적 개선

### 문제점
- 모든 분석이 한 번에 실행되어 API 비용 낭비
- 불필요한 분석까지 매번 실행

### 해결책
**단계별 분리 구조 도입**

```
[자동 실행 - 링크 입력 시 1회 호출]
├── 📺 영상 분석 (기본)
└── ⚖️ 소재 적합성 판단

[수동 실행 - 버튼 클릭 시]
├── 🔥 비판적 분석 (버튼 1)
└── 🎬 추가 분석 (버튼 2) - 한 번에 출력
    ├── 영상 제작 보조
    ├── 대본 방향
    ├── 영상 소스 추천
    ├── 콘텐츠 성과 예측
    └── 멤버십 연결 포인트
```

### 효과
- 필요한 분석만 실행 → API 비용 절감
- 소재 적합성 먼저 판단 → 부적합 영상은 추가 분석 안 함

---

## 2. 소재 적합성 판단 기능 추가

### 문제점
- 모든 영상을 무조건 비판적으로 분석
- 비판할 거리가 없는 영상도 분석 진행

### 해결책
**1단계에서 소재 적합성 먼저 판단**

| 체크 항목 | 내용 |
|-----------|------|
| 실현 가능성 이슈 | 감정적/현실적으로 실행 어려운 부분 있는가? |
| 숨겨진 전제 | 암묵적으로 가정하는 조건 있는가? |
| 비판 포인트 | 논리적으로 반박 가능한 지점 있는가? |
| 타겟 공감 가능성 | 직장인/대학생/부업러가 공감 가능한가? |
| 출처 활용 가능성 | 원본 인터뷰/책 등 인용 소스 있는가? |

**출력**
- 소재 적합도: ★1~5
- 판단: 적합 / 보류 / 부적합
- 활용 추천: 메인 콘텐츠 / 숏폼 / 참고만 / 패스

### 효과
- 콘텐츠로 만들 가치가 있는 영상만 필터링
- 시간 낭비 방지

---

## 3. 비판적 분석 품질 개선

### 문제점
- "할 수 있을까?", "누가 해?" 같은 감정적 비난
- 출처 없는 주장
- 떼쓰는 느낌의 비판

### 해결책
**논리적/팩트 기반 비판 구조**

| 나쁜 비판 | 좋은 비판 |
|-----------|----------|
| "버핏도 못 했는데 우리가 할 수 있을까?" | "2008년 버핏의 골드만삭스 매수는 S&P500 저점 대비 18% 반등 후였다. (출처: Bloomberg 2008.09.23)" |

**출력 구조**
```
| 항목 | 내용 | 출처 + 링크 |
| 원본 주장 | 거장이 말한 내용 | 원본 출처 |
| 반례/팩트 | 실제 데이터로 반박 | 기사/논문/보고서 |
| 숨겨진 조건 | 전략 성립 전제 | 출처 |
| 결론 | 일반인 적용 어려운 이유 | (위 출처 종합) |
```

### 효과
- 신뢰도 높은 비판
- 시청자 설득력 증가

---

## 4. 출처 링크 문제 해결

### 문제점
- Claude가 출처 언급하지만 실제 URL 없음
- "고용노동부 근로실태조사" 같은 텍스트만 있고 링크 없음
- AI가 만들어낸 가짜 통계 가능성

### 해결책
**Tavily API 연동**

```
Claude 분석 → 출처 언급 → Tavily로 실제 URL 검색 → 링크 표시
```

| 상태 | 표시 |
|------|------|
| 검증됨 (URL 찾음) | 파란색 링크 + ✓ |
| 미검증 (URL 못 찾음) | Google 검색 링크 |

### Tavily API
- 월 1,000회 무료
- AI 최적화 검색 + 출처 URL 제공
- 자동 결제 없음 (안전)

### 효과
- 실제 클릭 가능한 출처 링크 제공
- 내가 직접 자료 확인 가능
- 신뢰도 향상

---

## 5. 대본 방향 구조 개선

### 문제점
- "해결 암시"로 마무리 → 광고/유도 느낌
- 영상 자체 가치 없이 멤버십 유도만

### 해결책
**완결성 있는 영상 구조**

| 파트 | 내용 | 목적 |
|------|------|------|
| 인트로 (후킹) | 권위 뒤집기 | 호기심 유발 |
| 전개1 (권위 인정) | 거장 전략 인정 | 신뢰 확보 |
| 전개2 (모순 제기) | 팩트 기반 비판 | 의외성 |
| 전개3 (원인 분석) | 왜 실행 어려운지 + **자동매매 필요성 짧게** | 납득 + 힌트 |
| 공감 | 타겟 경험 연결 + **멤버십 자연스럽게** | 안심 + 유도 |
| 꿀팁 | 실용적 정보 하나 | 영상 가치 상승 |
| 마무리 | 비판적 사고 + 자신에게 맞게 개선 = 투자 본질 | 완결 |

### 멤버십 연결 방식
- ❌ "구체적인 투자 방법 알려드립니다"
- ✅ "이런 원칙을 자동화하는 방법, 멤버십에서 다룹니다"

### 효과
- 영상 자체로 가치 있음
- 멤버십 유도가 자연스러움
- 시청자 만족도 높음

---

## 6. 속도 최적화

### 문제점
- 분석이 너무 느림
- API 호출 비용 높음

### 해결책
**모델 분리 + 캐싱**

| 단계 | 모델 | 이유 |
|------|------|------|
| 1단계 (영상 분석 + 소재 적합성) | Haiku | 빠른 필터링 |
| 2단계 (비판적 분석) | Sonnet | 퀄리티 유지 |
| 3단계 (추가 분석) | Sonnet | 퀄리티 유지 |

**캐싱**
- 같은 영상 재분석 시 DB에서 바로 로드
- 중복 API 호출 방지

### 효과
- 1단계 속도 3~5배 향상
- 비용 절감

---

## 7. 로컬 서버 실행 편의성

### 문제점
- 매번 Claude Code 켜서 서버 실행해야 함
- 포트 충돌, 서버 꺼짐 등 번거로움

### 해결책
**배치 파일 생성**

- `start-servers.bat`: 더블클릭 → 백엔드+프론트 동시 실행 → 브라우저 자동 열림
- `stop-servers.bat`: 더블클릭 → 서버 종료

### 효과
- Claude Code 없이 서버 실행 가능
- 코드 수정할 때만 Claude Code 사용

---

## 8. 프롬프트 품질 향상 원칙

### 배운 것

**나쁜 프롬프트**
```
"썸네일 문구 추천해줘"
```

**좋은 프롬프트**
```
"아래 조건으로 썸네일 문구 5개 추천해줘.
- 글자 수: 10자 이내
- 형식: 의문형 or 충격형
- 포함 요소: 후킹 포인트에서 추출한 핵심 키워드
- 참고: 유튜브 투자 채널에서 조회수 높은 썸네일 패턴"
```

### 원칙
1. **구체적 조건** - 글자 수, 개수, 형식 명시
2. **패턴 제공** - 원하는 스타일 예시 보여주기
3. **맥락 연결** - 앞서 분석한 데이터 활용하라고 명시
4. **근거 요청** - 왜 그렇게 추천했는지 이유 포함

---

## 9. 다음에 적용할 것

### 프로젝트 시작 전
1. 전체 구조 먼저 설계 (단계별 분리)
2. 각 단계 입력/출력 명확히 정의
3. 프롬프트 템플릿 미리 작성

### 개발 중
1. 프롬프트는 코드에 저장 (나중에 DB로 이동)
2. 출처 필요하면 검색 API (Tavily) 연동
3. 모델 분리로 비용/속도 최적화

### 배포/운영
1. 로컬 개발 → 배치 파일로 편의성
2. 필요 시 Railway/Vercel 배포
3. 캐싱으로 중복 호출 방지

---

## 10. 사용한 기술/서비스

| 분류 | 기술 |
|------|------|
| 백엔드 | Python, FastAPI |
| 프론트엔드 | Next.js, TypeScript, Tailwind |
| DB | Supabase (PostgreSQL) |
| AI | Claude API (Haiku + Sonnet) |
| 검색 | Tavily API |
| 자막 | youtube-transcript-api |

---

## 마무리

이 프로젝트에서 가장 중요했던 건:

1. **명확한 목적** - 단순 분석이 아니라 "내 콘텐츠 제작에 활용"
2. **단계별 분리** - 필요한 것만 실행
3. **품질 vs 속도 균형** - 1단계는 빠르게, 상세 분석은 퀄리티
4. **출처 검증** - AI 환각 방지, 실제 링크 제공
5. **실용적 구조** - 배치 파일로 편하게 사용

다음 프로젝트에서도 이 원칙들 적용하면 더 좋은 결과물 나올 거야!
